pipeline {

    agent any
 
    stages {
 
        stage('Checkout Code') {

            steps {

                // Make sure to replace <your-username> and repo name with the correct one

                git branch: 'main', url: 'https://github.com/Ritesh-Dhumne-incredo/my_cicd_project.git'

            }

        }
 
        stage('Install Dependencies') {

            steps {

                // Windows command using 'bat'

                bat 'pip install -r requirements.txt'

            }

        }
 
        stage('Run Tests') {

            steps {

        // Ensure Python can see the src/ package
        bat 'set PYTHONPATH=%D:\jenkins_home\workspace\jenkinsPipeline% && python -m pytest --maxfail=1 --disable-warnings -q'

            }

        }
 
        stage('Build/Package (Optional)') {

            steps {

                bat 'echo Build successful. Ready for deployment!'

            }

        }
 
    }

}

 


